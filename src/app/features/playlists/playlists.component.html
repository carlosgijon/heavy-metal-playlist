<div class="playlists-container">

  <!-- Header -->
  <div class="playlists-header">
    <h2 class="playlists-title">
      <ng-icon name="heroQueueList" class="w-6 h-6"></ng-icon>
      Mis Playlists
    </h2>
    <button class="btn btn-primary btn-sm" (click)="openCreateForm()">
      <ng-icon name="heroPlus" class="w-4 h-4"></ng-icon>
      Nueva playlist
    </button>
  </div>

  <!-- Loading -->
  <div class="loading-container" *ngIf="loading">
    <span class="loading loading-spinner loading-lg text-primary"></span>
  </div>

  <!-- Empty state -->
  <div *ngIf="!loading && playlists.length === 0" class="alert alert-info empty-state">
    <ng-icon name="heroMusicalNote" class="w-8 h-8"></ng-icon>
    <div>
      <p>No tienes playlists todavía.</p>
      <p>Pulsa <strong>Nueva playlist</strong> para empezar.</p>
    </div>
  </div>

  <!-- Tabla de playlists -->
  <div class="table-wrapper" *ngIf="!loading && playlists.length > 0">
    <table class="playlists-table">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descripción</th>
          <th class="col-center">Canciones</th>
          <th class="col-center">Duración total</th>
          <th>Creada</th>
          <th class="col-center">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let playlist of playlists"
          class="playlist-row"
          (click)="selectPlaylist(playlist)">
          <td class="cell-name">
            <div class="cell-name-inner">
              <ng-icon name="heroMusicalNote" class="w-4 h-4"></ng-icon>
              {{ playlist.name }}
            </div>
          </td>
          <td class="cell-desc">{{ playlist.description || '—' }}</td>
          <td class="col-center">
            <span class="song-count">{{ playlist.songCount }}</span>
          </td>
          <td class="col-center cell-duration">
            {{ formatDuration(playlist.totalDuration) }}
          </td>
          <td class="cell-date">{{ formatDate(playlist.createdAt) }}</td>
          <td class="col-center cell-actions" (click)="$event.stopPropagation()">
            <button
              class="btn btn-ghost btn-xs tooltip"
              data-tip="Exportar PDF"
              (click)="exportPlaylistToPdf(playlist, $event)">
              <ng-icon name="heroPrinter" class="w-4 h-4"></ng-icon>
            </button>
            <button
              class="btn btn-ghost btn-xs tooltip"
              data-tip="Editar"
              (click)="openEditForm(playlist, $event)">
              <ng-icon name="heroPencil" class="w-4 h-4"></ng-icon>
            </button>
            <button
              class="btn btn-ghost btn-xs text-error tooltip"
              data-tip="Eliminar"
              (click)="deletePlaylist(playlist, $event)">
              <ng-icon name="heroTrash" class="w-4 h-4"></ng-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
