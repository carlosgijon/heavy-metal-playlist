<div class="app-shell">
  <!-- Sidebar -->
  <aside class="sidebar" [class.expanded]="sidebarExpanded">
    <nav class="sidebar-nav">
      <button
        class="nav-item nav-toggle"
        (click)="toggleSidebar()"
        [title]="sidebarExpanded ? 'Cerrar menú' : 'Abrir menú'">
        <ng-icon [name]="sidebarExpanded ? 'heroXMark' : 'heroBars3'" class="nav-icon"></ng-icon>
        <span class="nav-label">Cerrar menú</span>
      </button>
      <button
        class="nav-item"
        [class.active]="view() === 'calendario'"
        (click)="setView('calendario')"
        title="Calendario">
        <ng-icon name="heroCalendarDays" class="nav-icon"></ng-icon>
        <span class="nav-label">Calendario</span>
      </button>
      <button
        class="nav-item"
        [class.active]="view() === 'conciertos'"
        (click)="setView('conciertos')"
        title="Conciertos">
        <ng-icon name="heroStar" class="nav-icon"></ng-icon>
        <span class="nav-label">Conciertos</span>
      </button>
      <button
        class="nav-item"
        [class.active]="view() === 'songs'"
        (click)="setView('songs')"
        title="Canciones">
        <ng-icon name="heroMusicalNote" class="nav-icon"></ng-icon>
        <span class="nav-label">Canciones</span>
      </button>
      <button
        class="nav-item"
        [class.active]="view() === 'playlists' || view() === 'detail'"
        (click)="setView('playlists')"
        title="Playlists">
        <ng-icon name="heroQueueList" class="nav-icon"></ng-icon>
        <span class="nav-label">Playlists</span>
      </button>
      <button
        class="nav-item"
        [class.active]="view() === 'equipo'"
        (click)="setView('equipo')"
        title="Rider">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <!-- Mic capsule -->
          <rect x="9" y="2" width="6" height="11" rx="3"/>
          <!-- Pickup arc -->
          <path d="M5 10 a7 7 0 0 0 14 0"/>
          <!-- Stand pole -->
          <line x1="12" y1="17" x2="12" y2="21"/>
          <!-- Base -->
          <line x1="9" y1="21" x2="15" y2="21"/>
        </svg>
        <span class="nav-label">Rider</span>
      </button>
    </nav>
  </aside>

  <!-- Main area -->
  <div class="main-area">
    <!-- Header -->
    <header class="app-header">
      <div class="header-left">
        <ng-icon name="heroMusicalNote" class="w-5 h-5 text-primary"></ng-icon>
        <span class="brand-name">Blackout ORM</span>
      </div>
      <div class="header-right">
        <button class="btn btn-ghost btn-sm px-2" (click)="openSettings()" title="Configuración">
          <ng-icon name="heroCog6Tooth" class="w-5 h-5"></ng-icon>
        </button>
        <app-theme-switcher></app-theme-switcher>
      </div>
    </header>

    <!-- Content -->
    <main class="main-content">
      @if (view() === 'calendario') {
        <app-calendar class="p-4 h-full block overflow-auto" />
      } @else if (view() === 'songs') {
        <app-songs />
      } @else if (view() === 'playlists') {
        <app-playlists (playlistSelected)="onPlaylistSelected($event)" />
      } @else if (view() === 'equipo') {
        <app-equipo />
      } @else if (view() === 'conciertos') {
        <app-conciertos />
      } @else {
        <app-playlist [playlist]="selectedPlaylist()!" (back)="onBack()" />
      }
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      <span>Blackout ORM · Datos guardados localmente</span>
    </footer>
  </div>
</div>
